!function(){"use strict";angular.module("ngQuery",["ui.sortable","ui.bootstrap"])}(),function(){"use strict";function e(){function e(){var e={topLevelOperators:[{displayText:"AND",systemIdentifier:"And"},{displayText:"OR",systemIdentifier:"Or"}],fields:[{display:"Property1",systemIdentifier:"Property1",type:"text",validEntries:[],validOperators:[{displayText:"==",systemIdentifier:"Equals"},{displayText:"!=",systemIdentifier:"NotEquals"},{displayText:"IN",systemIdentifier:"In"},{displayText:"NOT IN",systemIdentifier:"NotIn"}]},{display:"Property2",systemIdentifier:"Property2",type:"text",validEntries:[],validOperators:[{displayText:"==",systemIdentifier:"Equals"},{displayText:"!=",systemIdentifier:"NotEquals"},{displayText:"IN",systemIdentifier:"In"},{displayText:"NOT IN",systemIdentifier:"NotIn"}]},{display:"Property3",systemIdentifier:"Property3",type:"text",validEntries:[],validOperators:[{displayText:"==",systemIdentifier:"Equals"},{displayText:"!=",systemIdentifier:"NotEquals"},{displayText:"IN",systemIdentifier:"In"},{displayText:"NOT IN",systemIdentifier:"NotIn"}]},{display:"Property4",systemIdentifier:"Property4",type:"numeric",validEntries:[],validOperators:[{displayText:"==",systemIdentifier:"Equals"},{displayText:"!=",systemIdentifier:"NotEquals"},{displayText:">",systemIdentifier:"GreaterThan"},{displayText:">=",systemIdentifier:"GreaterThanOrEqualTo"},{displayText:"<",systemIdentifier:"LessThan"},{displayText:"<=",systemIdentifier:"LessThanOrEqualTo"},{displayText:"IN",systemIdentifier:"In"},{displayText:"NOT IN",systemIdentifier:"NotIn"}]},{display:"Property5",systemIdentifier:"Property5",type:"date",validEntries:[],validOperators:[{displayText:"==",systemIdentifier:"Equals"},{displayText:"!=",systemIdentifier:"NotEquals"},{displayText:">",systemIdentifier:"GreaterThan"},{displayText:">=",systemIdentifier:"GreaterThanOrEqualTo"},{displayText:"<",systemIdentifier:"LessThan"},{displayText:"<=",systemIdentifier:"LessThanOrEqualTo"},{displayText:"IN",systemIdentifier:"In"},{displayText:"NOT IN",systemIdentifier:"NotIn"}]},{display:"Property6",systemIdentifier:"Property6",type:"text",validEntries:[],validOperators:[{displayText:"==",systemIdentifier:"Equals"},{displayText:"!=",systemIdentifier:"NotEquals"},{displayText:"IN",systemIdentifier:"In"},{displayText:"NOT IN",systemIdentifier:"NotIn"}]}]};return e}var t={getOptions:e};return t}angular.module("ngQuery").factory("queryOptions",e)}(),function(){"use strict"}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"js/views/query-builder-view.html",scope:{onExecute:"&"},controller:"queryBuilder as ctrl"}}angular.module("ngQuery").directive("queryBuilder",e)}(),function(){"use strict";function e(e,t,r){function s(){var e=r.open({templateUrl:"js/widgets/saveModal/save-modal.html",controller:"saveModal as ctrl"});e.result.then(function(e){e.length>30||e.length<1?alert("Invalid name!"):t.storeQuery(e,angular.copy(i.groups))},function(){})}var i=this;i.queryOptions=e.getOptions(),i.groups={},i.clearQuery=function(){i.groups.list.length=0},i.saveQuery=function(){s()},i.restoreQuery=function(e){i.groups.list.length=0,angular.copy(e,i.groups)},i.savedQueries=t.getQueries(),i.removeQuery=t.removeQuery}angular.module("ngQuery").controller("queryBuilder",e),e.$inject=["queryOptions","queryRepository","$modal"]}(),function(){"use strict";function e(e){return{restrict:"EA",templateUrl:"js/directives/ruleDirective/rule-view.html",scope:{queryOptions:"=",queryData:"=",onRemove:"&"},controller:"ruleDirectiveController as ctrl",link:function(t,r){angular.isArray(t.ctrl.model.list)&&(r.html("<rule-group class='nested-group' query-options='ctrl.queryOptions' rules='ctrl.model' on-remove='ctrl.onRemove()' is-nested='true'></rule-group>"),e(r.contents())(t))}}}angular.module("ngQuery").directive("rule",e),e.$inject=["$compile"]}(),function(){"use strict";function e(e){var t=this;t.queryOptions=e.queryOptions,t.model=e.queryData,t.onRemove=e.onRemove,t.availableOperators=[],t.validEntries=null,t.setAvailableOperators=function(){for(var e=0;e<t.queryOptions.fields.length;e++){var r=t.queryOptions.fields[e];if(r.systemIdentifier===t.model.selectedField){console.log(r),t.availableOperators=r.validOperators,t.validEntries=r.validEntries||null;break}}},t.setAvailableOperators(),t.isArray=angular.isArray}angular.module("ngQuery").controller("ruleDirectiveController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e){var t=this;t.queryOptions=e.queryOptions,t.rules=e.rules,t.onRemove=e.onRemove,t.isNested=e.isNested,t.rules.selectedTopLevelOperator=t.rules.selectedTopLevelOperator||t.queryOptions.topLevelOperators[0].systemIdentifier,t.setTopLevelOperator=function(e){t.rules.selectedTopLevelOperator=e},t.addRule=function(){void 0===t.rules.list&&(t.rules.list=[]),t.rules.list.push({})},t.removeRule=function(e){var r=t.rules.list.indexOf(e);t.rules.list.splice(r,1)},t.addGroup=function(){void 0===t.rules.list&&(t.rules.list=[]),t.rules.list.push({list:[]})},t.removeGroup=function(e){if(e){var r=t.rules.list.indexOf(e);t.rules.list.splice(r,1)}}}angular.module("ngQuery").controller("ruleGroupDirectiveController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(){return{restrict:"EA",templateUrl:"js/directives/ruleGroupDirective/rule-group-view.html",scope:{queryOptions:"=",rules:"=",isNested:"=",onRemove:"&"},controller:"ruleGroupDirectiveController as ctrl"}}angular.module("ngQuery").directive("ruleGroup",e)}(),function(){"use strict";function e(){var e={getQueries:t,storeQuery:r,removeQuery:s};return e}function t(){return i}function r(e,t){console.log(t),i.push({name:e,query:t})}function s(e){var t=i.indexOf(e);i.splice(t,1)}angular.module("ngQuery").factory("queryRepository",e);var i=[]}(),function(){"use strict";function e(e){var t=this;t.queryName=new Date,t.save=function(){e.close(t.queryName)},t.cancel=function(){e.dismiss("cancel")}}angular.module("ngQuery").controller("saveModal",e),e.$inject=["$modalInstance"]}();
angular.module("ngQuery").run(["$templateCache",function(n){n.put("js/views/query-builder-view.html",'<div class="col-sm-9">\n  <rule-group query-options="ctrl.queryOptions" rules="ctrl.groups"></rule-group>\n\n  <button type="button" class="btn btn-warning" ng-click="ctrl.clearQuery()" ng-disabled="ctrl.groups.list.length === undefined || ctrl.groups.list.length === 0">Clear Query</button>\n  <div class="btn-group pull-right" role="group">\n    <button type="button" class="btn btn-primary" ng-click="ctrl.saveQuery()" ng-disabled="ctrl.groups.list.length === undefined || ctrl.groups.list.length === 0">Save Query</button>\n    <button type="button" class="btn btn-success" ng-disabled="ctrl.groups.list.length === undefined || ctrl.groups.list.length === 0" ng-click="onExecute({data: ctrl.groups})">Exectute Query</button>\n  </div>\n</div>\n<div class="col-sm-3">\n  <div class="panel panel-info">\n    <div class="panel-heading">\n      <h3 class="panel-title">Saved Queries</h3>\n    </div>\n    <div class="panel-body">\n      <span ng-if="ctrl.savedQueries.length == 0">Nothing Saved.</span>\n\n      <div ng-repeat="save in ctrl.savedQueries">\n\n        <div class="btn-group pull-right">\n          <button type="button" class="btn btn-default btn-sm saved-query" ng-click="ctrl.restoreQuery(save.query)">\n            {{ save.name }}\n          </button>\n          <button type="button" class="btn btn-danger btn-sm pull-right" ng-click="ctrl.removeQuery(save)">\n            <i class="glyphicon glyphicon-trash"></i>\n          </button>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>')}]);
angular.module("ngQuery").run(["$templateCache",function(e){e.put("js/directives/ruleDirective/rule-view.html",'<div class="rule-container" ng-if="!ctrl.isArray(ctrl.model)">\n  <form class="form-inline" aria-hidden="true">\n\n    <select ng-model="ctrl.model.selectedField" class="form-control input-sm" ng-change="ctrl.setAvailableOperators()" ng-options="field.systemIdentifier as field.display for field in ctrl.queryOptions.fields">\n    </select>\n\n    <select ng-model="ctrl.model.selectedOperator" class="form-control input-sm" ng-options="op.systemIdentifier as op.displayText for op in ctrl.availableOperators">\n    </select>\n\n    <input type="text" class="form-control input-sm" ng-if="ctrl.validEntries.length === 0" ng-model="ctrl.model.selectEntry"></input>\n\n    <select ng-model="ctrl.model.selectEntry" class="form-control input-sm" ng-if="ctrl.validEntries.length > 0" ng-options="entry.systemIdentifier as entry.displayText for entry in ctrl.validEntries">\n    </select>\n\n    <button type="button" class="btn btn-danger btn-sm pull-right" ng-click="ctrl.onRemove()">\n      <i class="glyphicon glyphicon-trash"></i>\n    </button>\n  </form>\n</div>')}]);
angular.module("ngQuery").run(["$templateCache",function(n){n.put("js/directives/ruleGroupDirective/rule-group-view.html",'<div class="rule-group-container">\n  <div class="panel panel-default">\n    <div class="panel-body">\n      <div class="btn-group group-conditions" role="group">\n        <label ng-repeat="op in ctrl.queryOptions.topLevelOperators" class="btn btn-xs btn-primary toggle-button" ng-class="{\'active\': ctrl.rules.selectedTopLevelOperator == op.systemIdentifier }">\n          <input name="{{op.displayText}}_cond" type="radio" value="{{op.displayText}}" ng-click="ctrl.setTopLevelOperator(op.systemIdentifier)"> {{ op.displayText }}\n          </input>\n        </label>\n      </div>\n\n      <div class="btn-group pull-right group-actions">\n        <button type="button" class="btn btn-success btn-xs" ng-click="ctrl.addRule()">\n          <i class="glyphicon glyphicon-plus"></i> Add Rule\n        </button>\n        <button type="button" class="btn btn-success btn-xs" ng-click="ctrl.addGroup()">\n          <i class="glyphicon glyphicon-log-in"></i> Add Group\n        </button>\n        <button type="button" class="btn btn-danger btn-xs" ng-click="ctrl.onRemove()" ng-show="ctrl.isNested">\n          <i class="glyphicon glyphicon-trash"></i> Remove Group\n        </button>\n      </div>\n\n      <div class="rules-container" ui-sortable ng-model="ctrl.rules.list">\n        <div ng-repeat="rule in ctrl.rules.list">\n          <rule query-options="ctrl.queryOptions" query-data="rule" on-remove="ctrl.removeRule(rule)" class="draggable sortable"></rule>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>')}]);
angular.module("ngQuery").run(["$templateCache",function(n){n.put("js/widgets/saveModal/save-modal.html",'<div class="modal-header">\n  <h3 class="modal-title">Give your query a name...</h3>\n</div>\n<div class="modal-body">\n  <input type="text" class="form-control" ng-model="ctrl.queryName"></input>\n</div>\n<div class="modal-footer">\n  <button class="btn btn-primary" ng-click="ctrl.save()">Save</button>\n  <button class="btn btn-warning" ng-click="ctrl.cancel()">Cancel</button>\n</div>\n')}]);